{"id":"uhexen2-3h4","title":"Investigate -mod flag not working - code path not being executed","description":"-mod flag is now working (mod directory loads correctly)\n\nRemaining issues:\n1. Server spawns with vanilla progs.dat (CRC 26905) instead of mod's progs.dat\n2. Out of memory errors with mod content (need larger zone/heap)\n3. Protocol 21 message parsing incomplete\n\nFiles modified:\n- engine/h2shared/h2config.h: Disabled H2MP define to enable -mod code path\n- engine/h2shared/quakefs.c: Added -mod flag implementation and diagnostics","status":"closed","priority":1,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T01:10:19.704722826-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T01:21:02.396182358-05:00","closed_at":"2026-01-30T01:21:02.396182358-05:00","close_reason":"-mod flag now working correctly. Remaining issues tracked separately: uhexen2-i9x (protocol 21), uhexen2-3hx (centerprint spam)"}
{"id":"uhexen2-3hx","title":"SoT mod: Fix centerprint spam rate limiting","description":"'You need a bead of glass' and similar messages spam continuously. The rate-limiting in SV_BroadcastPrintf only applies to server messages, but these are client-side centerprints.\n\nNeed to add rate limiting to centerprint/SCR_CenterPrint mechanism.","status":"open","priority":2,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T01:19:55.470073614-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T01:19:55.470073614-05:00","labels":["sot","spam","ui"]}
{"id":"uhexen2-7hg","title":"Engine: Fix svc message handling for cmd \u003e= 80 (Illegible server message error)","status":"open","priority":2,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T00:04:43.860956937-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.860956937-05:00"}
{"id":"uhexen2-7ob","title":"H2 spider melee attack not triggering","description":"Spider sees player, approaches, but stops short of attacking when close.\n\n**Observed behavior:**\n- Spider detects player and starts running toward them\n- Spider gets close but never enters attack animation\n- Spider just circles around without biting\n\n**Investigation findings:**\nSpider AI flow:\n1. ai_run() sets enemy_range = range(self.enemy)\n2. CheckAnyAttack() checks enemy_vis = visible(self.enemy)\n3. If visible and RANGE_MELEE (\u003c 100 units), calls th_melee\n4. Spider's th_melee = SpiderMeleeBegin -\u003e SpiderMelee calls ai_melee()\n5. ai_melee() checks distance \u003c 60 units and does traceline\n\nPotential causes:\n- range() not returning RANGE_MELEE when close (distance calc uses view_ofs)\n- visible() traceline failing when close\n- movetogoal() not getting spider close enough due to hull issues\n- Spider uses self.hull = HULL_CROUCH (H2 hull 4, different from Q1)\n\n**Next steps:**\n- Add debug output to range() check and ai_melee() to see actual distances\n- Test if traceline is hitting the player correctly\n- Verify HULL_CROUCH movement works correctly\n- Check H2 hull size differences vs Q1\n\n**Note:** The H2 builtin number fix may have resolved this - movetogoal was at #68 instead of #67, which would cause the spider AI movement to fail. Needs testing.","notes":"Relevant to monster AI in uhexen2 - similar issues may exist with H2 monster pathfinding","status":"open","priority":1,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T01:12:54.135936839-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T01:12:54.135936839-05:00","labels":["ai","h2","melee","spider"]}
{"id":"uhexen2-clv","title":"Engine: Add fog/sky entity fields to entvars_t for SoT mod","status":"open","priority":1,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T00:04:43.42223132-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.42223132-05:00"}
{"id":"uhexen2-h9y","title":"Engine: Increase memory limits for SoT mod support (MAX_EDICTS, MAX_MODELS, MAX_EFRAGS, MAX_EFFECTS)","status":"open","priority":1,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T00:04:43.182201249-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.182201249-05:00"}
{"id":"uhexen2-hmz","title":"SoT mod: Implement custom protocol messages (89, 114, etc.)","description":"The Siege of the Moon mod uses custom protocol messages beyond standard Hexen2 (messages 89, 114, etc.). Currently these are being ignored which may cause game issues.\n\nFiles affected:\n- engine/hexen2/cl_parse.c (default case in CL_ParseServerMessage)\n\nNeed to identify and properly implement these custom protocol messages.","status":"open","priority":2,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T01:12:08.03767578-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T01:12:08.03767578-05:00","labels":["FIXME","protocol","sot"]}
{"id":"uhexen2-i5d","title":"Engine: Rate limit SV_BroadcastPrintf to prevent gamecode message spam","status":"open","priority":2,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T00:04:43.696568243-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.696568243-05:00"}
{"id":"uhexen2-i9x","title":"SoT mod: Implement protocol 21 messages (causes crashes)","description":"SoT uses protocol 21 with many custom messages. Currently these cause 'Illegible server message' crashes.\n\nUnknown messages that need implementation:\n- msg 80, 84, 89, 97-101, 105, 108, 110, 115-117, 121\n- msg 33 (causes immediate crash)\n\nFiles affected:\n- engine/hexen2/cl_parse.c (CL_ParseServerMessage)\n- engine/hexen2/protocol.h\n\nNeed to document these message types and implement proper handlers.","status":"open","priority":1,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T01:20:27.123436261-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T01:20:27.123436261-05:00","labels":["FIXME","crash","protocol","sot"],"dependencies":[{"issue_id":"uhexen2-i9x","depends_on_id":"uhexen2-hmz","type":"discovered-from","created_at":"2026-01-30T01:20:27.126431556-05:00","created_by":"Bob Bobber"}]}
{"id":"uhexen2-spd","title":"Docs: karma2 mod requires -portals flag for proper startup","status":"open","priority":3,"issue_type":"task","owner":"user@example.com","created_at":"2026-01-30T00:04:43.999175608-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.999175608-05:00"}
{"id":"uhexen2-vfa","title":"Engine: Add \\1-\\4 escape sequence support for Wheel of Karma extended charset (4x128 conchars)","status":"open","priority":2,"issue_type":"feature","owner":"user@example.com","created_at":"2026-01-30T00:04:43.555140541-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.555140541-05:00"}
{"id":"uhexen2-x74","title":"Engine: Add CRC support for SoT mod variants (159856, 28154, 22850)","status":"open","priority":1,"issue_type":"bug","owner":"user@example.com","created_at":"2026-01-30T00:04:43.296537082-05:00","created_by":"Bob Bobber","updated_at":"2026-01-30T00:04:43.296537082-05:00"}
